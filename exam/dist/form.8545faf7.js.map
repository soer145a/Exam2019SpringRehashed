{"version":3,"sources":["form.js"],"names":["window","addEventListener","init","userArray","front","document","querySelector","userData","userInfo","nemId","fetchMyJson","console","log","fetch","method","headers","Accept","then","res","json","data","displayFirstForm","checkLoginStatus","formUserName","value","formPassword","forEach","user","username","password","location","replace","style","display","dataObject","email","telefoneNr","fornavn","efternavn","adresse","userID","city","CPRnr","saveFirstSetOfData","obj","usernameForm","userPassword","userPasswordTwo","emailFormen","userCounter","backgroundColor","checkValidity","Math","random","toString","substr","length","displaySecondForm","saveSecondSetOfData","sendInfoToRest","postData","JSON","stringify","body"],"mappings":"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","file":"form.8545faf7.js","sourceRoot":"..","sourcesContent":["\"use strict\";\r\n\r\nwindow.addEventListener(\"DOMContentLoaded\", init);\r\nlet userArray = [];\r\nconst front = document.querySelector(\"#formLogin\");\r\nconst userData = document.querySelector(\"#formUserBlock\");\r\nconst userInfo = document.querySelector(\"#formUserInfo\");\r\nconst nemId = document.querySelector(\"#nemID\");\r\n\r\nfunction init() {\r\n  fetchMyJson();\r\n  console.log(\"init\");\r\n}\r\nfunction fetchMyJson() {\r\n  fetch(\r\n    \"https://examusers-4b00.restdb.io/rest/databaseuser?key=22631469345172666884\",\r\n    {\r\n      method: \"get\",\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n        \"x-apikey\": \"5cdbfbb9f66d7b1062cb34b7\"\r\n      }\r\n    }\r\n  )\r\n    .then(res => res.json())\r\n    .then(data => {\r\n      userArray = data;\r\n      console.log(userArray);\r\n      document\r\n        .querySelector(\"#formUserButton\")\r\n        .addEventListener(\"click\", displayFirstForm);\r\n      document\r\n        .querySelector(\"#formLoginButton\")\r\n        .addEventListener(\"click\", () => {\r\n          checkLoginStatus();\r\n        });\r\n    });\r\n}\r\nfunction checkLoginStatus() {\r\n  console.log(\"CHECK LOGIN\");\r\n  let formUserName = document.querySelector(\"#formUsername\").value;\r\n  let formPassword = document.querySelector(\"#formPassword\").value;\r\n  console.log(formUserName);\r\n  userArray.forEach(user => {\r\n    if (formUserName == user.username) {\r\n      if (user.password == formPassword) {\r\n        window.location.replace(\"spil.html\");\r\n      }\r\n    }\r\n  });\r\n}\r\nfunction displayFirstForm() {\r\n  front.style.display = \"none\";\r\n  userData.style.display = \"block\";\r\n\r\n  const dataObject = {\r\n    username: \"-placeholder-\",\r\n    password: \"-placeholder-\",\r\n    email: \"-placeholder-\",\r\n    telefoneNr: \"-placeholder-\",\r\n    fornavn: \"-placeholder-\",\r\n    efternavn: \"-placeholder-\",\r\n    adresse: \"-placeholder-\",\r\n    userID: \"-placeholder-\",\r\n    city: \"-placeholder-\",\r\n    CPRnr: \"-placeholder-\"\r\n  };\r\n\r\n  document\r\n    .querySelector(\"#formUserBlockFormButton\")\r\n    .addEventListener(\"click\", () => {\r\n      console.log(\"CLIKED BUTTON\");\r\n      saveFirstSetOfData(dataObject);\r\n    });\r\n}\r\nfunction saveFirstSetOfData(obj) {\r\n  console.log(\"SAVE FIRST SET OF DATA\");\r\n\r\n  let usernameForm = document.querySelector(\"#userName\");\r\n  let userPassword = document.querySelector(\"#userPassword\");\r\n  let userPasswordTwo = document.querySelector(\"#userPasswordConfirm\");\r\n  let emailFormen = document.querySelector(\"#userEmail\");\r\n\r\n  let userCounter = 0;\r\n  userArray.forEach(user => {\r\n    console.log(user.username, usernameForm.value);\r\n    if (user.username == usernameForm.value) {\r\n      usernameForm.style.backgroundColor = \"red\";\r\n    } else {\r\n      console.log(usernameForm.checkValidity());\r\n      if (usernameForm.checkValidity() != true) {\r\n      } else {\r\n        obj.username = usernameForm.value;\r\n\r\n        if (\r\n          document.querySelector(\"#userPassword\").value ==\r\n          document.querySelector(\"#userPasswordConfirm\").value\r\n        ) {\r\n          obj.password = document.querySelector(\"#userPassword\").value;\r\n          if (user.email == obj.email) {\r\n            emailFormen.style.backgroundColor = \"red\";\r\n          } else {\r\n            if (emailFormen.checkValidity() != true) {\r\n              console.log(emailFormen.checkValidity());\r\n\r\n              emailFormen.style.backgroundColor = \"red\";\r\n            } else {\r\n              obj.email = emailFormen.value;\r\n\r\n              if (obj.telefoneNr == user.telefoneNr) {\r\n              } else {\r\n                obj.telefoneNr = document.querySelector(\"#userTlf\").value;\r\n                userCounter++;\r\n                obj.userID = Math.random()\r\n                  .toString(36)\r\n                  .substr(2, 9);\r\n              }\r\n            }\r\n          }\r\n        } else {\r\n          userPassword.style.backgroundColor = \"red\";\r\n          userPasswordTwo.style.backgroundColor = \"red\";\r\n        }\r\n      }\r\n    }\r\n  });\r\n  if (userCounter == userArray.length) {\r\n    console.log(\"CORRECT\");\r\n    displaySecondForm(obj);\r\n  } else {\r\n  }\r\n}\r\nfunction displaySecondForm(obj) {\r\n  console.log(obj);\r\n  userData.style.display = \"none\";\r\n  userInfo.style.display = \"block\";\r\n  document\r\n    .querySelector(\"#formUserInfoButton\")\r\n    .addEventListener(\"click\", () => {\r\n      saveSecondSetOfData(obj);\r\n    });\r\n}\r\nfunction saveSecondSetOfData(obj) {\r\n  obj.fornavn = document.querySelector(\"#userFirstName\").value;\r\n  obj.efternavn = document.querySelector(\"#userLastName\").value;\r\n  obj.adresse = document.querySelector(\"#userAdress\").value;\r\n  obj.city = document.querySelector(\"#userCity\").value;\r\n  let userCounter = 0;\r\n  userArray.forEach(user => {\r\n    if (user.CPRnr == obj.CPRnr) {\r\n    } else {\r\n      obj.CPRnr = document.querySelector(\"#userCpr\").value;\r\n      userCounter++;\r\n    }\r\n  });\r\n  if (userCounter == userArray.length) {\r\n    console.log(\"CORRECT\");\r\n    sendInfoToRest(obj);\r\n  } else {\r\n  }\r\n}\r\n\r\nfunction sendInfoToRest(obj) {\r\n  console.log(\"SEND\");\r\n  nemId.style.display = \"block\";\r\n  userInfo.style.display = \"none\";\r\n  const postData = JSON.stringify(obj);\r\n  console.log(postData);\r\n  fetch(\"https://examusers-4b00.restdb.io/rest/databaseuser?\", {\r\n    method: \"post\",\r\n    headers: {\r\n      \"Content-Type\": \"application/json; charset=utf-8\",\r\n      \"x-apikey\": \"5cdbfbb9f66d7b1062cb34b7\",\r\n      \"cache-control\": \"no-cache\"\r\n    },\r\n    body: postData\r\n  });\r\n  fetchMyJson();\r\n}\r\n"]}